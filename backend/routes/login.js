var express = require('express');
var passport = require('passport');
const {generateToken} = require('../auth');
const user = require('../models/user');
var router = express.Router();

router.post('/',passport.authenticate('local',{ session: false }), function(req, res) {
    const token = generateToken(req.user)
    user.findById(req.user._id).then(data=>{
        res.json({ token,user:data }).status(200)
    }).catch(err=>console.log(err))
});

module.exports = router;
