import axios from 'axios'
const baseUrl = 'http://localhost:3001'
export const loginUser = (body)=> new Promise((resolve,reject)=>{
    axios.post(`${baseUrl}/login`,body).then(res=>{
        resolve(res)
    }).catch(err=>reject(err))
})

export const signupUser = (body) => new Promise((resolve,reject)=>{
    axios.post(`${baseUrl}/signup`,body).then(res=>{
        resolve(res)
    }).catch(err=>reject(err))
})

export const logoutUser = (navigate) => {
    localStorage.removeItem("token")
    localStorage.removeItem("user")
    navigate("/")
}

export const userInfo = ()=>{
    const user = localStorage.getItem("user") && JSON.parse(localStorage.getItem("user"))
    return user
}

export const getUsers = ()=> new Promise((resolve,reject)=>{
    axios.get(`${baseUrl}/users`).then(res=>resolve(res)).catch(err=>reject(err))
})

export const malwareScan = (formData) => new Promise((resolve,reject)=>{
    axios.post(`${baseUrl}/malware`,formData,{
        headers:{
            'Content-Type': 'multipart/form-data'
        }
    }).then(res=>{
        resolve(res)
    }).catch(err=>reject(err))
})